/*
**本类代码由代码生成器自动生成，可以根据需要修改
**生成时间：@DateTime.Now
*/



using System;
using Microsoft.AspNetCore.Authentication.JwtBearer;
using Microsoft.AspNetCore.Mvc;
using Nop.Core;
using Nop.Plugin.Api.Attributes;
using Nop.Plugin.Api.Controllers.ViewModel.@(Model.ApiCode);

namespace {Namespace}
{

    public partial class @(Model.ApiCode)Controller : BaseApiController
    {
		@{
			var actionMethod = "HttpGet";
			var paramsFrom = "";
			switch(Model.ActionMethod) {
				case "DELETE":
					actionMethod = "HttpDelete";
					break;
				case "PUT":
					actionMethod = "HttpPut";
					break;
				case "POST":
					actionMethod = "HttpPost";
					break;
				default:
					paramsFrom = "[FromQuery]";
					break;
			}

			var responseType = string.Empty;

			if(Model.IsList || Model.IsResultPaging) { 
				responseType = "IList<"+Model.ActionName+"ResponseModel>";
			}
			if(Model.IsResultBool) { 
				responseType = "bool";
			}
			if(Model.IsResultInt) { 
				responseType = "int";
			}

			var param_id = "";
			if(Model.ActionRoute.Contains("{id}")) {
				param_id = "int id, ";
			}

			var apiAuthorize = "[ApiAuthorize(AuthenticationSchemes = JwtBearerDefaults.AuthenticationScheme)]";
			if(Model.IsAuthorize) {
				apiAuthorize = "[ApiAuthorize(Policy = JwtBearerDefaults.AuthenticationScheme, AuthenticationSchemes = JwtBearerDefaults.AuthenticationScheme)]";
			}
		}

		/// <summary>
        /// @Model.ApiName
        /// </summary>
        /// <response code="200">OK</response>
        /// <response code="400">Bad request</response>
        /// <response code="401">Unauthorized</response>
		[@(actionMethod)("@Model.ActionRoute")]
        @(apiAuthorize)
        //[ProducesResponseType(typeof(CustomersRootObject), (int)HttpStatusCode.OK)]
        //[ProducesResponseType(typeof(ErrorsRootObject), (int)HttpStatusCode.BadRequest)]
        //[ProducesResponseType(typeof(string), (int)HttpStatusCode.Unauthorized)]
        [GetRequestsErrorInterceptorActionFilter]
		public IActionResult @(Model.ActionName)(@param_id@paramsFrom@(Model.ActionName)RequestModel request)
        {
			var resp = new AjaxResult<@responseType>() { Status = AjaxStatus.Normal };
            try
            {
            }
            catch (Exception)
            {
				resp.Status = AjaxStatus.Error;
				resp.Message = "服务器繁忙，请稍后重试！";
            }
			
			return RawJsonResult(resp);

        }
    }
}